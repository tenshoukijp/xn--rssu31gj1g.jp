%(hilight)s
<h2><i class="fa fa-history fa-fw"></i>秀丸マクロ・Perforceのチェックイン・チェックアウト</h2>
<ul class="checklist">
    <li>
        <h3>概要</h3>
        <p>
            バージョン管理ツール「Perforce(通称:P4)」への、
            チェックアウト・チェックインをするための簡易マクロです。
        </p>
    <li>
        <h3>ダウンロード</h3>
        <dl>
            <dt>
                <div class="download_file">DOWNLOAD ⇒ <a href="%(file)s">HmPerforceCheckInOut.zip</a>ファイル。ver 1.001</div>
            </dt>
            <dd>
                <div class="update_time">└更新日 %(year)04d/%(mon)02d/%(mday)02d</div>
            </dd>
        </dl>

    <li>
        <h3>ダウンロードファイルの内容</h3>
        <fieldset class="code">
            <legend>PerforceCheckOut.mac</legend>
            <pre class="brush:hmmacro;">
                
#must_should_reopen = 0;
//上書き禁止を外しておこうか
if( readonly ) {
    #must_should_reopen = 1;
}

//-----------------------------------------------------------------------------
//このファイルをPerforceでチェックアウトする
//-----------------------------------------------------------------------------
// P4 更新
runex &quot;p4 sync %f&quot;
    , 1             //sync    0:async 1:sync
    , 0, &quot;&quot;         //stdin   0:none 1:auto 2:file 3:(reserve) 4:all 5:select
    , 8, &quot;&quot;         //stdout  0:none 1:auto 2:file 3:add file  4:new 5:insert 6:replace 7:output 8:add output
    , 8, &quot;&quot;         //stderr  0:none 1:=out/auto 2:file 3:add file  4:new 5:insert 6:replace 7:output 8:add output
    , 0, &quot;&quot;         //folder  0:none 1:current 2:specify 3:(reserve) 4:exe's folder
    , 0             //show    0:auto 1:show 2:hide
    , 0             //nodraw  0:draw 1:no draw
    , 0             //unicode 0:ansi 2:unicode
    ;

// P4 チェックアウトによるロック
runex &quot;p4 edit %f&quot;
    , 1             //sync    0:async 1:sync
    , 0, &quot;&quot;         //stdin   0:none 1:auto 2:file 3:(reserve) 4:all 5:select
    , 8, &quot;&quot;         //stdout  0:none 1:auto 2:file 3:add file  4:new 5:insert 6:replace 7:output 8:add output
    , 8, &quot;&quot;         //stderr  0:none 1:=out/auto 2:file 3:add file  4:new 5:insert 6:replace 7:output 8:add output
    , 0, &quot;&quot;         //folder  0:none 1:current 2:specify 3:(reserve) 4:exe's folder
    , 0             //show    0:auto 1:show 2:hide
    , 0             //nodraw  0:draw 1:no draw
    , 0             //unicode 0:ansi 2:unicode
    ;

if (filetype == &quot;.lua&quot;) {
    setencode 6, 1, 2;
}

if (result==false) {

    message(&quot;チェックアウト失敗。&quot;);

} else {
    // チェックアウトする前、リードオンリーだったのだから、リオープンする。
    if( #must_should_reopen == 1 ) {
        reopen;
    }
}
</pre>
        </fieldset>
        <fieldset class="code">
            <legend>PerforceCheckIn.mac</legend>
            <pre class="brush:hmmacro;">
                
//-----------------------------------------------------------------------------
//このファイルをPerforceでチェックインする
//-----------------------------------------------------------------------------

$str = input(&quot;コメント&quot;,&quot;&quot;);

if( !$str ) endmacro;    // コメント必須
if( !result ) endmacro;  // キャンセルされた

runex &quot;p4 submit -d \&quot;&quot; + $str + &quot;\&quot; %f&quot;
    , 0             //sync    0:async 1:sync
    , 0, &quot;&quot;         //stdin   0:none 1:auto 2:file 3:(reserve) 4:all 5:select
    , 8, &quot;&quot;         //stdout  0:none 1:auto 2:file 3:add file  4:new 5:insert 6:replace 7:output 8:add output
    , 8, &quot;&quot;         //stderr  0:none 1:=out/auto 2:file 3:add file  4:new 5:insert 6:replace 7:output 8:add output
    , 0, &quot;&quot;         //folder  0:none 1:current 2:specify 3:(reserve) 4:exe's folder
    , 0             //show    0:auto 1:show 2:hide
    , 0             //nodraw  0:draw 1:no draw
    , 0             //unicode 0:ansi 2:unicode
    ;

endmacro;
</pre>
        </fieldset>

    <li>
        <h3>ライセンス</h3>
        <ul class="pointlist">
            <li>
                <p>パブリックドメインとなります。</p>
        </ul>

</ul>
