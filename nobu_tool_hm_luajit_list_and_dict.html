%(hilight)s
<h2><i class="fa fa-book fa-fw"></i>「hmLJ・LuaJIT」の例題 リスト(テーブル)との値のやり取り</h2>

<ul class="checklist">
    <li>
    <h3>概要</h3>
    <p>LuaJITの例題のひとつとなります。<br>
    </p>

    <h3>リストやタプルと添え字アクセス</h3>
    <p>リストやタプルへののアクセス関数を確かめてみましょう。<br>
    </p>

    <div class="code"><pre class="brush:python">
#L = loaddll( hidemarudir + &quot;\\&quot; + &quot;hmLJ.dll&quot; );

#_ = dllfunc(#L, &quot;DoString&quot;, &quot;&quot; +
&quot;ary = {1, 2, 3}\n&quot; +
&quot;ary2 = {unpack(ary)}\n&quot; // iタイプのシャロウコピー
);

#target = dllfunc(#L, &quot;GetNumItemOfList&quot;, &quot;ary2&quot;, 2);  // ary2[2]を数値として取得ということ

message(str(#target));

#_ = dllfunc(#L, &quot;SetStrItemOfList&quot;, &quot;ary2&quot;, 2, &quot;abc&quot;);  // ary2[2] = &quot;abc&quot;ということ

#ary2len = dllfunc(#L, &quot;GetLenOfList&quot;, &quot;ary2&quot;);

message(&quot;以下配列の中身を順々に表示&quot;);
##i = 1; // Luaの配列は1からスタート
while(##i &lt;= #ary2len ) {
  $$elem = dllfuncstr(#L, &quot;GetStrItemOfList&quot;, &quot;ary2&quot;, ##i);
  message($$elem);
  ##i = ##i + 1;
}

freedll( #L );

</pre></div>
    <p><img src="./other_soft/hm_ironpython/cnt_hm_ironpython_21.png" attr="noedge"></p>

    <h3>整数での添え字が可能なことの意味</h3>
    <p>テーブル本体ではなく、<span class="positive">テーブルにくっ付けてあるメタテーブルにも対象となります。</span><br>

    <p>次のようなマクロや関数の使い方も問題なく成立します。</p>
    <div class="code"><pre class="brush:python">
#L = loaddll( hidemarudir + &quot;\\&quot; + &quot;hmLJ.dll&quot; );

#_ = dllfunc(#L, &quot;DoString&quot;, &quot;&quot; +
    &quot;aaa = {a = 3, b = 5, c = 8}\n&quot; +
    &quot;setmetatable(aaa, { __index = { d = 1000, e = 3000 } } )\n&quot;
);

##elem = dllfunc(#L, &quot;GetNumItemOfDict&quot;, &quot;aaa&quot;, &quot;e&quot;); // aaa.e を数値として取得

message(str(##elem));

freedll( #L );
</pre></div>
    <p><img src="./other_soft/hm_ironpython/cnt_hm_ironpython_22.png" attr="noedge"></p>
</ul>